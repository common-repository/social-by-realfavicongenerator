var sbrfgInitSocialEditor=function(t,e,n,a,i){function r(){o(),t.find(".sbrfg-image-selection-container.sbrfg-no-existing-image").hide(),t.find(".sbrfg-image-selection-container.sbrfg-existing-image").show(),t.find(".sbrfg-editor-overall-container").fadeIn()}function o(){s=new RFGFacebook({apiKey:"TODO",element:jQuery("#sbrfg-editor .sbrfg-facebook-editor"),master_image_src:n,format:"wide",title:"A title you should change",description:"A description you should change, too",url:i,apiRequest:a}),a&&(t.find('input[name="sbrfg-title"]').val(s.getTitle()),t.find('textarea[name="sbrfg-description"]').val(s.getDescription())),s.on("scaleChange",function(e,n,a,i){var r=t.find('input[name="sbrfg-scale"]');n=RFGComponent.transposeInterval(n,a,i,r.attr("min"),r.attr("max")),r.val(n)}),s.render();var e=s.getAvailablePlatforms();t.find(".sbrfg-platform-switcher-container").html(""),Object.keys(e).forEach(function(n){var a=jQuery('<button href="#" class="button-secondary" data-platform="'+n+'" '+(n==s.getPlatform()?' disabled="disabled"':"")+">"+e[n]+"</button>");a.click(function(e){t.find(".sbrfg-platform-switcher-container button").removeAttr("disabled"),a.attr("disabled","disabled"),s.setPlatform(n),e.preventDefault()}),t.find(".sbrfg-platform-switcher-container").append(a)}),t.find('.sbrfg-platform-switcher-container input[name="platform"]').change(function(){var e=t.find('.sbrfg-platform-switcher-container input[name="platform"]:checked').val();s.setPlatform(e)});var r=s.getAvailableFormats();t.find(".format-radios-container").html("");Object.keys(r).forEach(function(e){t.find(".format-radios-container").append('<label><input type="radio" name="format" value="'+e+'"'+(e==s.getFormat()?" checked":"")+">"+r[e]+("wide"==e?"":" <em>Free during the beta</em>")+"</label>")}),t.find('.format-radios-container input[name="format"]').change(function(){var e=t.find('.format-radios-container input[name="format"]:checked').val();s.setFormat(e)}),t.find('input[name="sbrfg-title"]').on("input",function(t){s.setTitle(jQuery('input[name="sbrfg-title"]').val())}),t.find('textarea[name="sbrfg-description"]').on("input propertychange",function(t){s.setDescription(jQuery('textarea[name="sbrfg-description"]').val())}),t.find('input[name="sbrfg-scale"]').bind("propertychange change click keyup input paste",function(){var t=jQuery(this);s.setScale(t.val(),t.attr("min"),t.attr("max"))})}var f,t,s;!function(){jQuery(".sbrfg-image-selection-button").live("click",function(t){if(t.preventDefault(),f)return void f.open();f=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),f.on("select",function(){attachment=f.state().get("selection").first().toJSON(),e=attachment.id,n=attachment.url,r()}),f.open()})}(),function(){var n=jQuery.find("#post");jQuery(document).on("submit",n,function(){if(s){var n={};n=s.getApiFaviconDesign(),t.find('input[name="sbrfg-og-serialized-data"]').val(JSON.stringify(n)),t.find('input[name="sbrfg-og-image-id"]').val(e)}})}(),e&&n&&r()};